function formatSetItemString(inputString){try{return inputString.replace(/\s+/g,"-").toLowerCase()}catch(err){console.log("%cformatSetItemString","color:red;font-size:18px",err)}}function formatGetItemString(outputString){try{return outputString.replace(/-/g," ").replace(/(^\w{1})|(\s{1}\w{1})/g,match=>match.toUpperCase())}catch(err){console.log("%cformatGetItemString","color:red;font-size:18px",err)}}function getUrlVisited(){try{return JSON.parse(localStorage.getItem("nblr__urlVisited"))||localStorage.setItem("nblr__urlVisited",JSON.stringify([window.location.hostname+window.location.pathname])),JSON.parse(localStorage.getItem("nblr__urlVisited"))}catch(err){console.log("%cgetUrlVisited","color:red;font-size:18px",err)}}function getTimeSpent(){try{return JSON.parse(localStorage.getItem("nblr__timeSpent"))||localStorage.setItem("nblr__timeSpent",JSON.stringify([0])),JSON.parse(localStorage.getItem("nblr__timeSpent"))}catch(err){console.log("%cgetTimeSpent","color:red;font-size:18px",err)}}function getBrowser(){try{if(localStorage.getItem("nblr__browser"))return formatGetItemString(localStorage.getItem("nblr__browser"));var browser;(!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"))&&(browser="Opera"),"undefined"!=typeof InstallTrigger&&(browser="Firefox"),!/constructor/i.test(window.HTMLElement)&&"[object SafariRemoteNotification]"!==(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString()||(browser="Safari");var isIE=!!document.documentMode;isIE&&(browser="Internet Explorer"),isIE||!window.StyleMedia||(browser="Edge");var isChrome=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),isEdgeChromium=isChrome&&-1!=navigator.userAgent.indexOf("Edg");return isEdgeChromium&&(browser="Edge Chromium"),isChrome&&!isEdgeChromium&&(browser="Chrome"),localStorage.setItem("nblr__browser",formatSetItemString(browser)),browser}catch(err){console.log("%cgetBrowser","color:red;font-size:18px",err)}}function getOperatingSystem(){try{if(localStorage.getItem("nblr__operatingSystem"))return formatGetItemString(localStorage.getItem("nblr__operatingSystem"));var OSName="Not known";return-1!=navigator.appVersion.indexOf("Win")&&(OSName="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(OSName="Mac"),-1!=navigator.appVersion.indexOf("X11")&&(OSName="Unix"),-1!=navigator.appVersion.indexOf("Linux")&&(OSName="Linux"),localStorage.setItem("nblr__operatingSystem",formatSetItemString(OSName)),OSName}catch(err){console.log("%cgetOperatingSystem","color:red;font-size:18px",err)}}function getDeviceType(){try{if(localStorage.getItem("nblr__device"))return localStorage.getItem("nblr__device");var device="desktop",ua=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)&&(device="tablet"),/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)&&(device="mobile"),localStorage.setItem("nblr__device",device),device}catch(err){console.log("%cgetDeviceType","color:red;font-size:18px",err)}}function getDateTime(){try{return(new Date).toISOString().slice(0,10).replace(/-/g,"")}catch(err){console.log("%cgetDateTime","color:red;font-size:18px",err)}}function setCookie(expires){document.cookie="nblr__utm_medium="+utag_data["qp.utm_medium"]+";path=/;domain=.coloradotech.edu; expires="+expires,document.cookie="nblr__utm_source="+utag_data["qp.utm_source"]+";path=/;domain=.coloradotech.edu; expires="+expires,document.cookie="nblr__channelgroup=null;path=/;domain=.coloradotech.edu; expires="+expires}function setSessionUTM(){utag_data["qp.utm_medium"].includes("social")||utag_data["qp.utm_medium"].includes("social-network")||utag_data["qp.utm_medium"].includes("social-media")||utag_data["qp.utm_medium"].includes("sm")||utag_data["qp.utm_medium"].includes("social network")||utag_data["qp.utm_medium"].includes("social media")?sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Social")):"referral"==utag_data["qp.utm_medium"]?sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Referral")):utag_data["qp.utm_medium"].includes("cpc")||utag_data["qp.utm_medium"].includes("ppc")||utag_data["qp.utm_medium"].includes("paidsearch")?sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Paid Search")):utag_data["qp.utm_medium"].includes("display")||utag_data["qp.utm_medium"].includes("cpm")||utag_data["qp.utm_medium"].includes("banner")?sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Display")):sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Other")),sessionStorage.setItem("nblr__source",utag_data["qp.utm_source"]),sessionStorage.setItem("nblr__medium",utag_data["qp.utm_medium"])}function getMediumAndSource(param){try{var ref=document.referrer,expires=new Date(Date.now()+15552e6).toUTCString();return 0!=window.sessionStorage.nblr__flag&&window.sessionStorage.nblr__flag||(window.sessionStorage.nblr__flag=1,document.cookie.match("nblr__utm_medium=([^;]*)")&&document.cookie.match("nblr__utm_source=([^;]*)")&&document.cookie.match("nblr__channelgroup=([^;]*)")&&!utag_data["qp.utm_medium"]&&!utag_data["qp.utm_source"]&&(sessionStorage.setItem("nblr__medium",document.cookie.match("nblr__utm_medium=([^;]*)")[1]),sessionStorage.setItem("nblr__source",document.cookie.match("nblr__utm_source=([^;]*)")[1]),sessionStorage.setItem("nblr__channelgroup",document.cookie.match("nblr__channelgroup=([^;]*)")[1]),"referral"==sessionStorage.getItem("nblr__medium")?(ref.includes("facebook")||ref.includes("linkedin")||ref.includes("yammer")||ref.includes("instagram")||ref.includes("youtube")||ref.includes("twitter"))&&(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Social")),sessionStorage.setItem("nblr__medium","social"),sessionStorage.setItem("nblr__source",new URL(document.referrer).hostname.split(".")[1])):"social"==sessionStorage.getItem("nblr__medium")?""==ref||ref.includes("facebook")||ref.includes("linkedin")||ref.includes("yammer")||ref.includes("instagram")||ref.includes("youtube")||ref.includes("twitter")||ref.includes("www.google.com")||ref.includes("bing")||ref.includes("yahoo")||ref.includes("duckduckgo")||ref.includes("ask")||ref.includes("qwant")||ref.includes("baidu")||ref.includes("sogou")||ref.includes("ecosia")||(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Referral")),sessionStorage.setItem("nblr__medium","referral"),sessionStorage.setItem("nblr__source",document.referrer)):"direct"!=document.cookie.match("nblr__utm_source=([^;]*)")[1]&&"organic"!=document.cookie.match("nblr__utm_medium=([^;]*)")[1]||("organic"!=sessionStorage.getItem("nblr__medium")&&(ref.includes("www.google.com")||ref.includes("bing")||ref.includes("yahoo")||ref.includes("duckduckgo")||ref.includes("ask")||ref.includes("qwant")||ref.includes("baidu")||ref.includes("sogou")||ref.includes("ecosia"))?(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Organic Search")),sessionStorage.setItem("nblr__medium","organic"),sessionStorage.setItem("nblr__source",new URL(document.referrer).hostname.split(".")[1])):ref.includes("facebook")||ref.includes("linkedin")||ref.includes("yammer")||ref.includes("instagram")||ref.includes("youtube")||ref.includes("twitter")?(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Social")),sessionStorage.setItem("nblr__medium","social"),sessionStorage.setItem("nblr__source",new URL(document.referrer).hostname.split(".")[1])):"organic"!=sessionStorage.getItem("nblr__medium")&&(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Referral")),sessionStorage.setItem("nblr__medium","referral"),sessionStorage.setItem("nblr__source",document.referrer)))),document.cookie.match("nblr__utm_medium=([^;]*)")||document.cookie.match("nblr__utm_source=([^;]*)")||document.cookie.match("nblr__channelgroup=([^;]*)")||utag_data["qp.utm_medium"]||utag_data["qp.utm_source"]||sessionStorage.getItem("nblr__source")||sessionStorage.getItem("nblr__medium")||sessionStorage.getItem("nblr__channelgroup")?document.cookie.match("nblr__utm_medium=([^;]*)")||document.cookie.match("nblr__utm_source=([^;]*)")||document.cookie.match("nblr__channelgroup=([^;]*)")||!utag_data["qp.utm_medium"]||!utag_data["qp.utm_source"]?document.cookie.match("nblr__utm_medium=([^;]*)")&&document.cookie.match("nblr__utm_source=([^;]*)")&&document.cookie.match("nblr__channelgroup=([^;]*)")&&utag_data["qp.utm_medium"]&&utag_data["qp.utm_source"]&&(document.cookie.match("nblr__utm_medium=([^;]*)")[1]==utag_data["qp.utm_medium"]&&document.cookie.match("nblr__utm_source=([^;]*)")[1]==utag_data["qp.utm_source"]||setSessionUTM()):(setCookie(expires),setSessionUTM()):""==ref?(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Direct")),sessionStorage.setItem("nblr__medium","none"),sessionStorage.setItem("nblr__source","direct")):ref.includes("www.google.com")||ref.includes("bing")||ref.includes("yahoo")||ref.includes("duckduckgo")||ref.includes("ask")||ref.includes("qwant")||ref.includes("baidu")||ref.includes("sogou")||ref.includes("ecosia")?(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Organic Search")),sessionStorage.setItem("nblr__medium","organic"),sessionStorage.setItem("nblr__source",new URL(document.referrer).hostname.split(".")[1])):ref.includes("facebook")||ref.includes("linkedin")||ref.includes("yammer")||ref.includes("instagram")||ref.includes("youtube")||ref.includes("twitter")?(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Social")),sessionStorage.setItem("nblr__medium","social"),sessionStorage.setItem("nblr__source",new URL(document.referrer).hostname.split(".")[1])):(sessionStorage.setItem("nblr__channelgroup",formatSetItemString("Referral")),sessionStorage.setItem("nblr__medium","referral"),sessionStorage.setItem("nblr__source",document.referrer)),document.cookie="nblr__utm_medium="+sessionStorage.getItem("nblr__medium")+";path=/;domain=.coloradotech.edu; expires="+expires,document.cookie="nblr__utm_source="+sessionStorage.getItem("nblr__source")+";path=/;domain=.coloradotech.edu; expires="+expires,document.cookie="nblr__channelgroup="+sessionStorage.getItem("nblr__channelgroup")+";path=/;domain=.coloradotech.edu; expires="+expires),sessionStorage.getItem(param)}catch(err){console.log("%cgetMediumAndSource","color:red;font-size:18px",err)}}function getVisitId(){try{return utag_data["cp._ga"]?utag_data["cp.utag_main_ses_id"]+":"+utag_data["cp._ga"].split(".").splice(2,2).join("."):utag_data["cp.utag_main_ses_id"]+":"+document.cookie.match("_ga=([^;]*)")[1].split(".").splice(2,2).join(".")}catch(err){console.log("%cgetVisitId","color:red;font-size:18px",err)}}var start=new Date;$(window).unload(function(){var timeSpent=JSON.parse(localStorage.getItem("nblr__urlVisited"));timeSpent.push(document.location.hostname+document.location.pathname),localStorage.setItem("nblr__urlVisited",JSON.stringify(timeSpent));var secs=(new Date-start)/1e3,timeSpent=JSON.parse(localStorage.getItem("nblr__timeSpent"));timeSpent.push(secs),localStorage.setItem("nblr__timeSpent",JSON.stringify(timeSpent))});var input={visitId:getVisitId(),pagePath:getUrlVisited(),time:getTimeSpent(),visitNumber:parseInt(utag_data["cp.utag_main__sn"]),medium:getMediumAndSource("nblr__medium"),source:getMediumAndSource("nblr__source"),browser:getBrowser(),operatingSystem:getOperatingSystem(),date:getDateTime(),channelGrouping:getMediumAndSource("nblr__channelgroup"),deviceCategory:getDeviceType(),enrolled:0},Http=new XMLHttpRequest,url="https://realtimeism-cors-updatebq-2ifiidu4wq-el.a.run.app/",data=[];Http.open("POST",url),Http.setRequestHeader("Content-type","application/json");var obj=JSON.stringify(input);Http.send(obj),window.sessionStorage.nblr__flag=0,Http.onload=e=>{data=Http.responseText,utag_data.nblr__intent_score=data},console.log("%cInput Object","color:red;font-size:18px",input);